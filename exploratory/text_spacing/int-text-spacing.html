<!DOCTYPE html>
<html  lang="en" >
<head>
<meta charset="utf-8">
<title>Interactive test: Text spacing tests</title>
<link rel="help" href="https://drafts.csswg.org/css-text-4/">
<link rel="author" title="r12a" href="mailto:ishida@w3.org">

<link rel="stylesheet" href="../../fonts/metadata_styles.css"/>
<style>

/* the CSS below is not part of the test */
.test {
margin: 0px 2% 1rem 2%;
width: 600px;
height: 200px;
font-size: 36px;
border: 1px solid orange;
overflow: hidden;
padding: 40px;
}
.test span { background-color: moccasin; }
</style>
<script src="../../fonts/interactive_functions.js"> </script>
<script>




function setLetterSpacing (value) {
var tests = document.querySelectorAll('#normal span')
if (tests.length===0) tests = document.querySelectorAll('.test')
for (let i=0;i<tests.length;i++) tests[i].style.letterSpacing = value
}




function setWordSpacing (value) {
//document.getElementById('textEmphasisColor').value = value
tests = document.querySelectorAll('.test span')
if (tests.length===0) tests = document.querySelectorAll('.test')
for (let i=0;i<tests.length;i++) tests[i].style.wordSpacing = value
}




function setWritingMode (value) {
tests = document.querySelectorAll('.test')
for (let i=0;i<tests.length;i++) tests[i].style.writingMode = value
}

</script>
</head>
<body onLoad="addTest()">
<h1>Interactive test: Text spacing tests</h1>


<!-- INPUT AREA -->
<div><textarea id="assertion" type="text" placeholder="Add an assertion here." dir="auto"></textarea></div>

<div><textarea id="in" dir="auto" type="text" placeholder="Add text to be tested text here and click on GO."></textarea> 
<button onClick="setText(document.getElementById('in').value)" id="go" style="vertical-align: top;">Go</button></div>



<!-- TESTS -->
<div><textarea id="instructions" type="text" placeholder="Add instructions here, and 'Test passes if...'." dir="auto"></textarea></div>

<div class="test" id="normal" dir="auto"></div>


<!-- CONTROLS -->
<div class="advice">Adjust the width of the test boxes.<br/>
<input id="boxWidth" min="10" max="1000" step="1" value="600" oninput="setBoxWidth(this.value)" style="width:90%; margin-left: 5%;" type="range"> <span id="wSizeIndicator" style="font-size:80%;">600</span>px</div>

<div class="advice">Adjust the height of the test box.<br/>
<input id="boxHeight" min="10" max="1000" step="1" value="200" oninput="setBoxHeight(this.value)" style="width:90%; margin-left: 5%;" type="range"> <span id="vSizeIndicator" style="font-size:80%;">200</span>px</div>


<p class="advice">
Set the language <input id="language" type="text" onChange="setLanguage(this.value)"/> <button onClick="setLanguage(document.getElementById('language').value)">Apply</button><br/>

Set font size&nbsp;<input id="fontSize" min="10" max="120" step="1" value="36" oninput="setFontSize(this.value)" type="range"/> 
<span id="sizeOfFont" style="font-size:80%;">36</span>px<br/>

Set the font to <input id="fontFamily" type="text" onChange="setFont(this.value)"/> <button onClick="setFont(document.getElementById('fontFamily').value)">Apply</button>
</p>

<p>&nbsp;</p>

<p class="advice">Spans automatically get a shaded background. If the test includes one or more spans, only the text inside the span(s) will have the explicity chosen style applied to them. Unless overridden in the URL parameters, the highlighted values show initial settings.</p>



<p><fieldset>
<legend><code>letter-spacing:</code></legend>
<label onClick="setLetterSpacing('normal'); document.getElementById('letterSpacingNumber').value='';"><input type="checkbox" value="none"  id="letterSpacingnormal" name="letterSpacing" checked/><code>normal</code></label>
|
<label onClick="setLetterSpacing('none')"><input 
onChange="setLetterSpacing(this.value); document.getElementById('letterSpacingnormal').checked=false" type="text" value="" id="letterSpacingNumber" placeholder="Length"></label>  <button onClick="setLetterSpacing(document.getElementById('letterSpacingNumber').value)">Apply</button>
</fieldset>
</p>






<p><fieldset>
<legend><code>word-spacing:</code></legend>
<label onClick="setWordSpacing('normal'); document.getElementById('wordSpacingNumber').value='';"><input type="checkbox" value="none"  id="wordSpacingnormal" name="wordSpacing" checked/><code>normal</code></label>
|
<label onClick="setWordSpacing('none')"><input 
onChange="setWordSpacing(this.value); document.getElementById('wordSpacingnormal').checked=false" type="text" value="" id="wordSpacingNumber" placeholder="Length"></label>  <button onClick="setWordSpacing(document.getElementById('wordSpacingNumber').value)">Apply</button>
</fieldset>
</p>







<p><code>writing-mode:</code>
<label onClick="setWritingMode('horizontal-tb')"><input type="radio" checked value="horizontal-tb" id="writingModehorizontal-tb" name="writingMode"/>
<code>horizontal-tb</code></label>
<label onClick="setWritingMode('vertical-rl')"><input type="radio" value="vertical-rl" id="writingModevertical-rl" name="writingMode"/>
<code>vertical-rl</code></label>
<label onClick="setWritingMode('vertical-lr')"><input type="radio" value="vertical-lr" id="writingModevertical-lr" name="writingMode"/>
<code>vertical-lr</code></label>
<label onClick="setWritingMode('sideways-rl')"><input type="radio" value="sideways-rl" id="writingModesideways-rl" name="writingMode"/>
<code>sideways-rl</code></label>
<label onClick="setWritingMode('sideways-lr')"><input type="radio" value="sideways-lr" id="writingModesideways-lr" name="writingMode"/>
<code>sideways-lr</code></label>
</p>


<!-- INFO -->
<div id="info" style="clear: both; position: inherit;">
<ul class="notes">
<li>More tests: 

<li>Spec links: <a href="https://drafts.csswg.org/css-text/#letter-spacing-property">letter-spacing</a> &bull;
<a href="https://drafts.csswg.org/css-text/#word-spacing-property">word-spacing</a> &bull;
<a href="https://drafts.csswg.org/css-writing-modes-4/">writing-mode</a>
</li>

<a href="https://github.com/w3c/i18n-tests/wiki/List-of-interactive-tests-&-results">All interactive tests &amp; results</a> &bull;
<a href="https://github.com/w3c/character_phrase_tests/issues">Character &amp; phrase test repo</a> &bull;
<a href="https://w3c.github.io/i18n-tests/results/int-text-decoration">Text decoration results</a>
</li>

<li>Browser: <span id="version"></span></li>
<li><button onClick="document.getElementById('snapshot').value = snapParameters(); document.getElementById('snapshot').select()">Take a snapshot</button>: <input id="snapshot" style="width:30em;" /></li>
</ul>
</div>
<script>
document.getElementById('version').innerHTML = navigator.userAgent


// check for parameters and take appropriate action
var parameters = location.search.split('&')
parameters[0] = parameters[0].substring(1)
for (var p=0;p<parameters.length;p++) {  
	pairs = parameters[p].split('=');
	if (pairs[0] == 'a' && pairs[1]) { 
					document.getElementById('assertion').value = decodeURIComponent(pairs[1])
					}
	if (pairs[0] == 'text' && pairs[1]) { 
					document.getElementById('in').value = decodeURIComponent(pairs[1])
					setText(decodeURIComponent(pairs[1]))
					}
	if (pairs[0] == 'i' && pairs[1]) { 
					document.getElementById('instructions').value = decodeURIComponent(pairs[1])
					}


	if (pairs[0] == 'lang' && pairs[1]) setLanguage( pairs[1] )
	if (pairs[0] == 'fontSize' && pairs[1]) {
					setFontSize(decodeURIComponent(pairs[1])) 
					document.getElementById('fontSize').value = decodeURIComponent(pairs[1])
					}
	if (pairs[0] == 'fontFamily' && pairs[1]) {
					setFont(decodeURIComponent(pairs[1]))
					document.getElementById('fontFamily').value = decodeURIComponent(pairs[1])
					}
	if (pairs[0] == 'width' && pairs[1]) { 
					setBoxWidth(pairs[1])
					document.getElementById('boxWidth').value = pairs[1]
					}
	if (pairs[0] == 'height' && pairs[1]) { 
					setBoxHeight(pairs[1])
					document.getElementById('boxHeight').value = pairs[1]
					}


	}


function addTest () {
    // call this from body onLoad, because the spans were not being found when this was part of the previous function
    var v
    var parameters = location.search.split('&')
    parameters[0] = parameters[0].substring(1)
    for (var p=0;p<parameters.length;p++) {  
        pairs = parameters[p].split('=');
        if (pairs[0] == 'letterSpacing' && pairs[1]) {
            values = decodeURIComponent(pairs[1])
            if (pairs[1] !== 'normal') {
                document.getElementById('letterSpacingnormal').checked = false
                document.getElementById('letterSpacingNumber').value = pairs[1]
                }
            else {
                document.getElementById('letterSpacingnormal').checked = true
                document.getElementById('letterSpacingNumber').value = ''
                }
            setLetterSpacing(pairs[1])
            }

        if (pairs[0] == 'wordSpacing' && pairs[1]) {
            values = decodeURIComponent(pairs[1]).split(' ')
            if (pairs[1] !== 'normal') {
                document.getElementById('wordSpacingnormal').checked = false
                document.getElementById('wordSpacingNumber').value = pairs[1]
                setWordSpacing(pairs[1])
                }
            else {
                document.getElementById('wordSpacingnormal').checked = true
                document.getElementById('wordSpacingNumber').value = ''
                setWordSpacing('normal')
                }
            }

        if (pairs[0] == 'writingMode' && pairs[1]) {
            setWritingMode(pairs[1]) 
            document.getElementById('writingMode'+pairs[1]).checked = true 
            }
        }
    }




function snapParameters () {
// take a snapshot of the settings of the page and make available as URL parameters
// this can be picked up by the user to point to the current setup of the page

out = "https://w3c.github.io/i18n-tests/exploratory/text_spacing/int-text-spacing.html?"
out = "localhost/i18n-tests/exploratory/text_spacing/int-text-spacing.html?"


out += '&text='+encodeURIComponent(document.getElementById('in').value)
out += '&a='+encodeURIComponent(document.getElementById('assertion').value)
out += '&i='+encodeURIComponent(document.getElementById('instructions').value)


if (document.getElementById('language') && document.getElementById('language').value != '') out += 'lang='+document.getElementById('language').value
if (document.getElementById('fontSize') && document.getElementById('fontSize').value != '') out += '&fontSize='+encodeURIComponent(document.getElementById('fontSize').value)
if (document.getElementById('fontFamily') && document.getElementById('fontFamily').value != '') out += '&fontFamily='+encodeURIComponent(document.getElementById('fontFamily').value)
if (document.getElementById('boxWidth')) out += '&width='+document.getElementById('boxWidth').value
if (document.getElementById('boxHeight')) out += '&height='+document.getElementById('boxHeight').value

value = ''
if (document.getElementById('letterSpacingNumber')) out += '&letterSpacing='+encodeURIComponent(document.getElementById('letterSpacingNumber').value.trim())

if (document.getElementById('wordSpacingNumber')) out += '&wordSpacing='+encodeURIComponent(document.getElementById('wordSpacingNumber').value.trim())


out += '&writingMode='+document.querySelector('input[name="writingMode"]:checked').value

return out
}
</script>
</body>
</html>